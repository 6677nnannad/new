<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WenYan</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Noto+Sans+SC:wght@300;400;700&family=Noto+Sans+KR:wght@300;400;700&family=Noto+Sans+JP:wght@300;400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            overflow-x: hidden;
            background: linear-gradient(135deg, rgba(255,182,193,0.3), rgba(173,216,230,0.3));
            min-height: 200vh;
        }
        
        /* 启动画面 */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #ff69b4, #87ceeb, #dda0dd);
            background-size: 400% 400%;
            animation: gradientShift 3s ease-in-out infinite;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.8s ease-out;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .heart-loader {
            width: 100px;
            height: 100px;
            position: relative;
            animation: heartbeat 1.5s ease-in-out infinite;
        }
        
        .heart-loader::before,
        .heart-loader::after {
            content: '';
            width: 52px;
            height: 40px;
            position: absolute;
            left: 50px;
            top: 0;
            background: #ff1744;
            border-radius: 25px 25px 0 0;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
        }
        
        .heart-loader::after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        /* 背景和心形特效 */
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://s21.ax1x.com/2025/08/26/pVyoUud.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            z-index: -2;
        }
        
        .background::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.3);
            z-index: 1;
        }
        
        .hearts-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }
        
        .floating-heart {
            position: absolute;
            color: rgba(255,182,193,0.7);
            animation: float 8s linear infinite;
            font-size: 20px;
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* 主容器 */
        .main-container {
            opacity: 0;
            transition: opacity 1s ease-in;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }
        
        /* 顶部心形 */
        .top-heart {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff1744;
            font-size: 30px;
            z-index: 100;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.1); }
        }
        
        /* 时间显示 */
        .time-display {
            position: fixed;
            top: 15px;
            left: 20px;
            color: rgba(255,255,255,0.9);
            font-size: 14px;
            font-weight: 300;
            z-index: 100;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            font-family: 'Dancing Script', cursive;
        }
        
        /* 时间下方图片 */
        .time-image {
            position: fixed;
            top: 45px;
            left: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.3);
            z-index: 100;
            transition: transform 0.3s ease;
        }
        
        .time-image:hover {
            transform: scale(1.1);
        }
        
        /* 宝藏链接 */
        .treasure-link {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #ff6b6b, #ffd93d);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            z-index: 100;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .treasure-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        /* 密码弹窗 */
        .password-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }
        
        .password-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            color: white;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            transform: scale(0);
            transition: transform 0.3s ease;
        }
        
        .password-modal.show .password-content {
            transform: scale(1);
        }
        
        .password-input {
            margin: 20px 0;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            text-align: center;
            outline: none;
            width: 200px;
        }
        
        .password-btn {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            margin: 0 10px;
            transition: background 0.3s ease;
        }
        
        .password-btn:hover {
            background: #ff5252;
        }
        
        /* 相册容器 */
        .album-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }
        
        .album-wrapper {
            position: relative;
            max-width: 800px;
            width: 90%;
            aspect-ratio: 4/3;
        }
        
        .album-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            transition: all 0.8s ease;
            filter: blur(0px);
        }
        
        .album-image.blur {
            filter: blur(10px);
            transform: scale(0.95);
        }
        
        /* 导航按钮 */
        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.9);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            display: none;
        }
        
        .nav-btn:hover {
            background: white;
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .nav-btn.prev {
            left: -80px;
        }
        
        .nav-btn.next {
            right: -80px;
        }
        
        @media (min-width: 768px) {
            .nav-btn {
                display: block;
            }
        }
        
        /* 文案显示 */
        .quote-container {
            position: absolute;
            top: -120px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            width: 100%;
            max-width: 600px;
        }
        
        .quote-text {
            font-size: 24px;
            font-weight: 400;
            margin-bottom: 10px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s ease;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .quote-text.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .quote-translation {
            font-size: 16px;
            color: rgba(255,255,255,0.8);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.8s ease 0.2s;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .quote-translation.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* 底部控件 */
        .bottom-controls {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 100;
        }
        
        .bottom-text {
            color: #87ceeb;
            font-size: 14px;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .music-control {
            background: rgba(255,255,255,0.2);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .music-control:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .music-control.clicked {
            animation: clickFeedback 0.3s ease;
        }
        
        @keyframes clickFeedback {
            0% { transform: scale(1); }
            50% { transform: scale(0.9); }
            100% { transform: scale(1); }
        }
        
        /* 随机文案 */
        .floating-quote {
            position: absolute;
            color: rgba(255,255,255,0.9);
            font-size: 18px;
            font-weight: 300;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            opacity: 0;
            transform: scale(0.8);
            transition: all 0.8s ease;
            pointer-events: none;
            z-index: 50;
            max-width: 300px;
            text-align: center;
        }
        
        .floating-quote.show {
            opacity: 1;
            transform: scale(1);
        }
        
        /* 触摸手势 */
        .touch-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .album-wrapper {
                width: 95%;
            }
            
            .quote-container {
                top: -100px;
            }
            
            .quote-text {
                font-size: 20px;
            }
            
            .quote-translation {
                font-size: 14px;
            }
            
            .time-display {
                font-size: 12px;
            }
            
            .time-image {
                width: 45px;
                height: 45px;
                top: 35px;
            }
            
            .treasure-link {
                font-size: 12px;
                padding: 6px 12px;
            }
        }
        
        /* 额外的浪漫元素 */
        .sparkle {
            position: absolute;
            color: rgba(255,215,0,0.8);
            font-size: 12px;
            animation: sparkle 2s linear infinite;
            pointer-events: none;
        }
        
        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
            50% { opacity: 1; transform: scale(1) rotate(180deg); }
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- 启动画面 -->
    <div class="loading-screen" id="loadingScreen">
        <div class="heart-loader"></div>
    </div>
    
    <!-- 背景 -->
    <div class="background"></div>
    <div class="hearts-container" id="heartsContainer"></div>
    
    <!-- 主容器 -->
    <div class="main-container" id="mainContainer">
        <!-- 顶部心形 -->
        <div class="top-heart">💖</div>
        
        <!-- 时间显示 -->
        <div class="time-display" id="timeDisplay"></div>
        <img src="https://pic.itxiaohui.top/20250827/b00b951e795e57ff62378a1f13310d77.png" alt="装饰图片" class="time-image">
        
        <!-- 宝藏链接 -->
        <a href="#" class="treasure-link" id="treasureLink">宝藏</a>
        
        <!-- 密码弹窗 -->
        <div class="password-modal" id="passwordModal">
            <div class="password-content">
                <h3>答对密码有惊喜 ✨</h3>
                <input type="password" class="password-input" id="passwordInput" placeholder="请输入密码">
                <br>
                <button class="password-btn" onclick="checkPassword()">确认</button>
                <button class="password-btn" onclick="closeModal()">取消</button>
            </div>
        </div>
        
        <!-- 相册容器 -->
        <div class="album-container">
            <div class="album-wrapper">
                <div class="quote-container">
                    <div class="quote-text" id="quoteText"></div>
                    <div class="quote-translation" id="quoteTranslation"></div>
                </div>
                
                <img src="" alt="相册图片" class="album-image" id="albumImage">
                <div class="touch-area" id="touchArea"></div>
                
                <button class="nav-btn prev" id="prevBtn">‹</button>
                <button class="nav-btn next" id="nextBtn">›</button>
            </div>
        </div>
        
        <!-- 底部控件 -->
        <div class="bottom-controls">
            <div class="bottom-text">心比长相好，懂比爱重要</div>
            <button class="music-control" id="musicControl">🎵</button>
        </div>
    </div>
    
    <!-- 音频 -->
    <audio id="backgroundMusic" loop>
        <source src="https://raw.githubusercontent.com/6677nnannad/my-wenb-music/refs/heads/main/haru%20haru.mp3" type="audio/mpeg">
    </audio>
    
    <script>
        // 图片数组
        const images = [
            'https://s21.ax1x.com/2025/08/26/pVyoG9O.jpg',
            'https://s21.ax1x.com/2025/08/26/pVyoT8U.jpg',
            'https://s21.ax1x.com/2025/08/26/pVyo72F.jpg',
            'https://s21.ax1x.com/2025/08/26/pVyoHv4.jpg',
            'https://s21.ax1x.com/2025/08/26/pVyoqKJ.jpg',
            'https://s21.ax1x.com/2025/08/26/pVyoLr9.jpg',
            'https://s21.ax1x.com/2025/08/26/pVyoObR.jpg',
            'https://pic.itxiaohui.top/20250826/7d87ea90f93391070a74c60562e37d24.jpg',
            'https://pic.itxiaohui.top/20250826/75ab2fbb9b0c32d304a2048d755313f0.jpg',
            'https://pic.itxiaohui.top/20250826/1ac4f123d972adbc6397892176d7f955.jpg',
            'https://pic.itxiaohui.top/20250826/cd61b4b4712ef9afb3ae71965b3e7cb0.jpg',
            'https://pic.itxiaohui.top/20250826/b5cee1a7f10b1503dc5b7ec7c158fa2c.jpg',
            'https://pic.itxiaohui.top/20250826/b8940c81fe3d6b2500926609e98d4a70.jpg',
            'https://pic.itxiaohui.top/20250826/b049ffdfe00f7cf4c5db9bc5e260a194.jpg',
            'https://pic.itxiaohui.top/20250826/bd37208fdad5f3e800eed2017e767a78.jpg',
            'https://pic.itxiaohui.top/20250826/dd289be3bff468a132d153e4732f8a06.jpg'
        ];
        
        // 文案数组
        const quotes = [
            {text: "The heart wants what it wants", translation: "心之所向，无所不能", font: "Dancing Script", color: "#ff69b4"},
            {text: "사랑은 모든 것을 용서한다", translation: "爱能宽恕一切", font: "Noto Sans KR", color: "#87ceeb"},
            {text: "心の奥底で愛している", translation: "在心灵深处爱着", font: "Noto Sans JP", color: "#dda0dd"},
            {text: "Sometimes the heart sees what is invisible to the eye", translation: "有时心能看见眼睛看不到的东西", font: "Dancing Script", color: "#ff6347"},
            {text: "그리움은 가장 긴 거리다", translation: "思念是最遥远的距离", font: "Noto Sans KR", color: "#98fb98"},
            {text: "愛は時間を超える", translation: "爱能超越时间", font: "Noto Sans JP", color: "#ffa07a"},
            {text: "Love is not finding someone to live with, it's finding someone you can't live without", translation: "爱不是找到一个可以共度一生的人，而是找到一个没有ta就无法生活的人", font: "Dancing Script", color: "#da70d6"},
            {text: "내 마음속에 너만이 있다", translation: "我心中只有你", font: "Noto Sans KR", color: "#40e0d0"},
            {text: "君への想いは永遠に", translation: "对你的思念是永恒的", font: "Noto Sans JP", color: "#ff1493"},
            {text: "In your eyes, I found my home", translation: "在你的眼中，我找到了家", font: "Dancing Script", color: "#ffd700"}
        ];
        
        // 随机浪漫文案
        const floatingQuotes = [
            {text: "Love is in the air", font: "Dancing Script", color: "#ff69b4"},
            {text: "Forever yours", font: "Dancing Script", color: "#87ceeb"},
            {text: "마음이 설렌다", font: "Noto Sans KR", color: "#dda0dd"},
            {text: "愛してる", font: "Noto Sans JP", color: "#ff6347"},
            {text: "You are my sunshine", font: "Dancing Script", color: "#ffd700"},
            {text: "꽃보다 아름다운 너", font: "Noto Sans KR", color: "#98fb98"},
            {text: "君が好き", font: "Noto Sans JP", color: "#ffa07a"},
            {text: "My heart belongs to you", font: "Dancing Script", color: "#da70d6"},
            {text: "사랑해", font: "Noto Sans KR", color: "#40e0d0"},
            {text: "永遠に一緒", font: "Noto Sans JP", color: "#ff1493"}
        ];
        
        let currentImageIndex = 0;
        let isChanging = false;
        let usedQuotes = [];
        let usedFloatingQuotes = [];
        let music = document.getElementById('backgroundMusic');
        let isPlaying = false;
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 3秒后进入主页面
            setTimeout(() => {
                document.getElementById('loadingScreen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loadingScreen').style.display = 'none';
                    document.getElementById('mainContainer').style.opacity = '1';
                    startMusic();
                }, 800);
            }, 3000);
            
            // 初始化相册
            initAlbum();
            
            // 开始心形特效
            createHearts();
            setInterval(createHearts, 2000);
            
            // 更新时间
            updateTime();
            setInterval(updateTime, 1000);
            
            // 开始图片轮播
            setTimeout(() => {
                setInterval(nextImage, 4000);
            }, 4000);
            
            // 开始随机文案
            setTimeout(() => {
                showFloatingQuote();
                setInterval(showFloatingQuote, 4000);
            }, 2000);
            
            // 绑定事件
            bindEvents();
        });
        
        // 初始化相册
        function initAlbum() {
            const albumImage = document.getElementById('albumImage');
            albumImage.src = images[0];
            showQuote();
        }
        
        // 开始音乐播放
        function startMusic() {
            music.play().then(() => {
                isPlaying = true;
            }).catch(e => {
                console.log('音乐自动播放被阻止');
            });
        }
        
        // 切换到下一张图片
        function nextImage() {
            if (isChanging) return;
            
            isChanging = true;
            const albumImage = document.getElementById('albumImage');
            
            // 模糊效果
            albumImage.classList.add('blur');
            
            setTimeout(() => {
                currentImageIndex = (currentImageIndex + 1) % images.length;
                albumImage.src = images[currentImageIndex];
                showQuote();
                
                setTimeout(() => {
                    albumImage.classList.remove('blur');
                    isChanging = false;
                }, 100);
            }, 400);
        }
        
        // 切换到上一张图片
        function prevImage() {
            if (isChanging) return;
            
            isChanging = true;
            const albumImage = document.getElementById('albumImage');
            
            albumImage.classList.add('blur');
            
            setTimeout(() => {
                currentImageIndex = currentImageIndex === 0 ? images.length - 1 : currentImageIndex - 1;
                albumImage.src = images[currentImageIndex];
                showQuote();
                
                setTimeout(() => {
                    albumImage.classList.remove('blur');
                    isChanging = false;
                }, 100);
            }, 400);
        }
        
        // 显示文案
        function showQuote() {
            if (usedQuotes.length === quotes.length) {
                usedQuotes = [];
            }
            
            let availableQuotes = quotes.filter(q => !usedQuotes.includes(q));
            let selectedQuote = availableQuotes[Math.floor(Math.random() * availableQuotes.length)];
            usedQuotes.push(selectedQuote);
            
            const quoteText = document.getElementById('quoteText');
            const quoteTranslation = document.getElementById('quoteTranslation');
            
            // 隐藏旧文案
            quoteText.classList.remove('show');
            quoteTranslation.classList.remove('show');
            
            setTimeout(() => {
                quoteText.textContent = selectedQuote.text;
                quoteText.style.fontFamily = selectedQuote.font;
                quoteText.style.color = selectedQuote.color;
                
                quoteTranslation.textContent = selectedQuote.translation;
                
                // 显示新文案
                quoteText.classList.add('show');
                quoteTranslation.classList.add('show');
            }, 400);
        }
        
        // 显示随机浮动文案
        function showFloatingQuote() {
            if (usedFloatingQuotes.length === floatingQuotes.length) {
                usedFloatingQuotes = [];
            }
            
            let availableQuotes = floatingQuotes.filter(q => !usedFloatingQuotes.includes(q));
            let selectedQuote = availableQuotes[Math.floor(Math.random() * availableQuotes.length)];
            usedFloatingQuotes.push(selectedQuote);
            
            const floatingQuote = document.createElement('div');
            floatingQuote.className = 'floating-quote';
            floatingQuote.textContent = selectedQuote.text;
            floatingQuote.style.fontFamily = selectedQuote.font;
            floatingQuote.style.color = selectedQuote.color;
            
            // 随机位置
            const positions = [
                {top: '20%', left: '10%'},
                {top: '30%', right: '15%'},
                {top: '70%', left: '5%'},
                {top: '60%', right: '10%'},
                {top: '80%', left: '60%'},
                {top: '15%', right: '40%'}
            ];
            
            const position = positions[Math.floor(Math.random() * positions.length)];
            Object.assign(floatingQuote.style, position);
            
            document.body.appendChild(floatingQuote);
            
            // 显示动画
            setTimeout(() => {
                floatingQuote.classList.add('show');
            }, 100);
            
            // 创建星光效果
            createSparkles(floatingQuote);
            
            // 3秒后消失
            setTimeout(() => {
                floatingQuote.classList.remove('show');
                setTimeout(() => {
                    if (floatingQuote.parentNode) {
                        floatingQuote.parentNode.removeChild(floatingQuote);
                    }
                }, 800);
            }, 3000);
        }
        
        // 创建星光效果
        function createSparkles(element) {
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.className = 'sparkle';
                    sparkle.textContent = '✨';
                    sparkle.style.position = 'absolute';
                    sparkle.style.top = Math.random() * 100 + '%';
                    sparkle.style.left = Math.random() * 100 + '%';
                    element.appendChild(sparkle);
                    
                    setTimeout(() => {
                        if (sparkle.parentNode) {
                            sparkle.parentNode.removeChild(sparkle);
                        }
                    }, 2000);
                }, i * 500);
            }
        }
        
        // 创建心形特效
        function createHearts() {
            const heartsContainer = document.getElementById('heartsContainer');
            const heart = document.createElement('div');
            heart.className = 'floating-heart';
            heart.innerHTML = ['💖', '💕', '💗', '💝'][Math.floor(Math.random() * 4)];
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDuration = (Math.random() * 3 + 5) + 's';
            
            heartsContainer.appendChild(heart);
            
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.parentNode.removeChild(heart);
                }
            }, 8000);
        }
        
        // 更新时间
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleString('zh-CN', {
                timeZone: 'Asia/Shanghai',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('timeDisplay').textContent = timeString;
        }
        
        // 绑定事件
        function bindEvents() {
            // 导航按钮
            document.getElementById('nextBtn').addEventListener('click', nextImage);
            document.getElementById('prevBtn').addEventListener('click', prevImage);
            
            // 音乐控制
            document.getElementById('musicControl').addEventListener('click', function() {
                this.classList.add('clicked');
                setTimeout(() => {
                    this.classList.remove('clicked');
                }, 300);
                
                if (isPlaying) {
                    music.pause();
                    isPlaying = false;
                } else {
                    music.play();
                    isPlaying = true;
                }
            });
            
            // 触摸手势
            let startX = 0;
            let endX = 0;
            
            const touchArea = document.getElementById('touchArea');
            
            touchArea.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
            });
            
            touchArea.addEventListener('touchend', function(e) {
                endX = e.changedTouches[0].clientX;
                handleSwipe();
            });
            
            function handleSwipe() {
                const difference = startX - endX;
                const threshold = 50;
                
                if (Math.abs(difference) > threshold) {
                    if (difference > 0) {
                        nextImage(); // 向左滑动，显示下一张
                    } else {
                        prevImage(); // 向右滑动，显示上一张
                    }
                }
            }
            
            // 宝藏链接
            document.getElementById('treasureLink').addEventListener('click', function(e) {
                e.preventDefault();
                showPasswordModal();
            });
        }
        
        // 显示密码弹窗
        function showPasswordModal() {
            const modal = document.getElementById('passwordModal');
            modal.style.display = 'flex';
            setTimeout(() => {
                modal.classList.add('show');
            }, 10);
            
            document.getElementById('passwordInput').focus();
        }
        
        // 关闭弹窗
        function closeModal() {
            const modal = document.getElementById('passwordModal');
            modal.classList.remove('show');
            setTimeout(() => {
                modal.style.display = 'none';
            }, 300);
            
            document.getElementById('passwordInput').value = '';
        }
        
        // 检查密码
        function checkPassword() {
            const password = document.getElementById('passwordInput').value;
            if (password === '0809') {
                closeModal();
                // 创建视频弹窗
                createVideoModal();
            } else {
                alert('密码错误，请重试！');
                document.getElementById('passwordInput').value = '';
                document.getElementById('passwordInput').focus();
            }
        }
        
        // 创建视频弹窗
        function createVideoModal() {
            const videoModal = document.createElement('div');
            videoModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                z-index: 10001;
                display: flex;
                justify-content: center;
                align-items: center;
                animation: fadeIn 0.5s ease;
            `;
            
            const videoContainer = document.createElement('div');
            videoContainer.style.cssText = `
                position: relative;
                max-width: 90%;
                max-height: 90%;
                background: #000;
                border-radius: 20px;
                overflow: hidden;
                box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            `;
            
            const video = document.createElement('video');
            video.style.cssText = `
                width: 100%;
                height: 100%;
                display: block;
            `;
            video.controls = true;
            video.autoplay = true;
            video.src = 'https://raw.githubusercontent.com/6677nnannad/my-wenb-music/refs/heads/main/%E4%BD%A0%E8%A2%AB%E9%AA%97%E4%BA%86%20%E5%8E%9F%E7%89%88%E9%AB%98%E6%B8%85%E6%97%A0%E6%B0%B4%E5%8D%B0.mp4';
            
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = '×';
            closeBtn.style.cssText = `
                position: absolute;
                top: 10px;
                right: 15px;
                background: rgba(255,255,255,0.8);
                border: none;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                font-size: 24px;
                font-weight: bold;
                cursor: pointer;
                z-index: 10002;
                transition: background 0.3s ease;
            `;
            
            closeBtn.addEventListener('click', () => {
                document.body.removeChild(videoModal);
            });
            
            closeBtn.addEventListener('mouseenter', () => {
                closeBtn.style.background = 'rgba(255,255,255,1)';
            });
            
            closeBtn.addEventListener('mouseleave', () => {
                closeBtn.style.background = 'rgba(255,255,255,0.8)';
            });
            
            videoContainer.appendChild(video);
            videoContainer.appendChild(closeBtn);
            videoModal.appendChild(videoContainer);
            
            // 点击背景关闭
            videoModal.addEventListener('click', (e) => {
                if (e.target === videoModal) {
                    document.body.removeChild(videoModal);
                }
            });
            
            document.body.appendChild(videoModal);
        }
        
        // 键盘事件
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                prevImage();
            } else if (e.key === 'ArrowRight') {
                nextImage();
            } else if (e.key === ' ') {
                e.preventDefault();
                document.getElementById('musicControl').click();
            } else if (e.key === 'Escape') {
                closeModal();
            }
        });
        
        // 密码输入框回车事件
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && document.getElementById('passwordModal').style.display === 'flex') {
                checkPassword();
            }
        });
        
        // 预加载图片
        function preloadImages() {
            images.forEach((src, index) => {
                if (index > 0) { // 第一张已经加载
                    const img = new Image();
                    img.src = src;
                }
            });
        }
        
        // 页面加载完成后预加载图片
        window.addEventListener('load', preloadImages);
        
        // 添加CSS动画
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            
            .floating-quote:nth-child(odd) {
                animation-delay: 0.5s;
            }
            
            .floating-quote:nth-child(even) {
                animation-delay: 1s;
            }
            
            /* 滚动条美化 */
            ::-webkit-scrollbar {
                width: 8px;
            }
            
            ::-webkit-scrollbar-track {
                background: rgba(255,255,255,0.1);
                border-radius: 10px;
            }
            
            ::-webkit-scrollbar-thumb {
                background: rgba(255,182,193,0.6);
                border-radius: 10px;
            }
            
            ::-webkit-scrollbar-thumb:hover {
                background: rgba(255,182,193,0.8);
            }
            
            /* 额外的浪漫元素 */
            @keyframes twinkle {
                0%, 100% { opacity: 0.3; }
                50% { opacity: 1; }
            }
            
            .romantic-element {
                position: fixed;
                color: rgba(255,215,0,0.6);
                font-size: 16px;
                animation: twinkle 3s ease-in-out infinite;
                pointer-events: none;
                z-index: 1;
            }
        `;
        document.head.appendChild(style);
        
        // 添加更多浪漫元素
        function addRomanticElements() {
            const elements = ['✨', '🌟', '💫', '⭐'];
            const positions = [
                {top: '10%', left: '5%'},
                {top: '15%', right: '8%'},
                {top: '25%', left: '3%'},
                {top: '35%', right: '5%'},
                {top: '45%', left: '2%'},
                {top: '55%', right: '7%'},
                {top: '65%', left: '4%'},
                {top: '75%', right: '3%'},
                {top: '85%', left: '6%'},
                {top: '90%', right: '4%'}
            ];
            
            positions.forEach((pos, index) => {
                setTimeout(() => {
                    const element = document.createElement('div');
                    element.className = 'romantic-element';
                    element.textContent = elements[Math.floor(Math.random() * elements.length)];
                    element.style.top = pos.top;
                    if (pos.left) element.style.left = pos.left;
                    if (pos.right) element.style.right = pos.right;
                    element.style.animationDelay = Math.random() * 2 + 's';
                    
                    document.body.appendChild(element);
                }, index * 200);
            });
        }
        
        // 页面加载完成后添加浪漫元素
        setTimeout(addRomanticElements, 5000);
    </script>
</body>
</html>